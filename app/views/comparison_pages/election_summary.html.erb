<% provide(:title, @election.name) %>

<div class="election-summary-header">
  <div class="election-details-and-flag-container">
    <div class="columns">
  
      <!-- Flag image -->
      <div class="column is-narrow">
        <figure class="image is-flag-small">
          <%= image_tag(get_election_picture_url(@election.id), alt: @election.name) %>
        </figure>
      </div>
    
      <!-- Election details -->
      <div class="column">
        <p class="election-name-small">
          <%= @election.name %>
        </p>
        <p><%= display_election_date(@election.election_date) %></p>
      </div>
    </div>
  </div>
</div>

<div class="content">
  <% if @content_top %>
    <%= sanitize @content_top.content %>
  <% end %>
</div>

<!-- COMPARE PARTY LEADERS (if enabled) -->
<% if @party_leaders %>
  <%= link_to compare_party_leaders_path(@election) do %>
    <div class="box">
      <div class="election-section-heading">
        Compare Party Leaders
      </div>
      <div class="columns is-multiline is-mobile">
        <% @party_leaders.each do |pl| %>
          <div class="column is-half-mobile is-half-tablet is-one-third-desktop is-one-third-widescreen is-one-third-fullhd">
            <%= render 'comparison_pages/comparison_participant_header', participant_id: pl.id, party_id: pl.party_id, avatar_image_class: 'is-avatar-small' %>
          </div>
        <% end %>
      </div>
    </div>
  <% end %>
<% end %>

<!-- COMPARE PARTY PLATFORMS (if enabled) -->
<% if @parties %>
  <%= link_to compare_party_platforms_path(@election) do %>
    <div class="box">
      <div class="election-section-heading">
        Compare Party Platforms
      </div>
      <div class="columns is-multiline is-mobile">
        <% @parties.each do |party| %>
          <div class="column is-half-mobile is-half-tablet is-one-third-desktop is-one-third-widescreen is-one-third-fullhd">
            <%= render 'comparison_pages/comparison_participant_header', participant_id: party.id, party_id: party.party_id, avatar_image_class: 'is-avatar-small' %>
          </div>
        <% end %>
      </div>
    </div>
  <% end %>
<% end %>

<!-- COMPARE CANDIDATES FOR OFFICE -->
<% @election.offices.order(:order).each do |office| %>
  <%= form_with(url: election_summary_path(@election), method: "get", local: true) do |f| %>
    <div class="box">
      <div class="election-section-heading">
        Compare Candidates for <%= office.name %>
      </div>
      <div class="columns is-multiline is-mobile is-centered is-vcentered">
        <div class="column is-12-mobile is-narrow-tablet is-narrow-desktop is-narrow-widescreen is-narrow-fullhd">
          <%= f.label "Select your district", class: 'label' %>
        </div>
        <div class="column is-12-mobile is-narrow-tablet is-narrow-desktop is-narrow-widescreen is-narrow-fullhd">
          <div class="select">
            <%= f.select(:district_id, options_for_select(options_for_district(office.id))) %>
          </div>
        </div>
        <div class="column is-12-mobile is-narrow-tablet is-narrow-desktop is-narrow-widescreen is-narrow-fullhd">
          <%= f.submit "Go!", class: "button is-link" %>
        </div>
      </div>
    </div>
  <% end %>
<% end %>

<div class="content">
  <% if @content_bottom %>
    <%= sanitize @content_bottom.content %>
  <% end %>
</div>